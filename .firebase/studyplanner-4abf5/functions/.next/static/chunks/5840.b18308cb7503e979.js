"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5840],{27600:(e,t,r)=>{r.d(t,{A:()=>u,AuthProvider:()=>d});var s=r(95155),a=r(93004),l=r(35695),n=r(12115),o=r(56104),i=r(87481);let c=(0,n.createContext)(void 0);function u(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0),[m,f]=(0,n.useState)(null),p=(0,l.useRouter)(),{toast:g}=(0,i.dj)();(0,n.useEffect)(()=>(0,a.hg)(o.j2,e=>{u(e),h(!1)},e=>{f(e.message),h(!1),g({title:"Authentication Error",description:e.message,variant:"destructive"})}),[g]);let b=(0,n.useCallback)(async(e,t,r)=>{h(!0),f(null);try{let s=await (0,a.eJ)(o.j2,e,t);await (0,a.r7)(s.user,{displayName:r}),u(s.user),g({title:"Signup Successful!",description:"Welcome to StudyTrack!"}),p.push("/dashboard")}catch(e){f(e.message),"auth/email-already-in-use"===e.code?g({title:"Signup Failed",description:"This email address is already registered. Please use a different email or try logging in.",variant:"destructive"}):g({title:"Signup Failed",description:e.message,variant:"destructive"})}finally{h(!1)}},[o.j2,p,g]),v=(0,n.useCallback)(async(e,t)=>{h(!0),f(null);try{await (0,a.x9)(o.j2,e,t),g({title:"Login Successful!",description:"Welcome back!"}),p.push("/dashboard")}catch(e){f(e.message),g({title:"Login Failed",description:e.message,variant:"destructive"})}finally{h(!1)}},[o.j2,p,g]),x=(0,n.useCallback)(async()=>{h(!0),f(null);try{await (0,a.CI)(o.j2),g({title:"Logged Out",description:"You have been successfully logged out."}),p.push("/login")}catch(e){f(e.message),g({title:"Logout Failed",description:e.message,variant:"destructive"})}finally{h(!1)}},[o.j2,p,g]),y=(0,n.useMemo)(()=>({currentUser:r,loading:d,error:m,signUp:b,signIn:v,logOut:x}),[r,d,m,b,v,x]);return(0,s.jsx)(c.Provider,{value:y,children:t})}},35840:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var s=r(95155),a=r(81499),l=r(66695),n=r(27600),o=r(56104),i=r(35317),c=r(9041),u=r(50172),d=r(12115),h=r(8782),m=r(34e3),f=r(54811);let p={physics:"hsl(var(--chart-1))",chemistry:"hsl(var(--chart-2))",biology:"hsl(var(--chart-3))",mathematics:"hsl(var(--chart-4))",english:"hsl(var(--chart-5))",history:"hsl(var(--chart-1))",other:"hsl(var(--chart-2))"},g=e=>p[e.toLowerCase()]||"hsl(var(--muted-foreground))",b={hours:{label:"Hours"},physics:{label:"Physics",color:g("physics")},chemistry:{label:"Chemistry",color:g("chemistry")},biology:{label:"Biology",color:g("biology")},mathematics:{label:"Mathematics",color:g("mathematics")},english:{label:"English",color:g("english")},history:{label:"History",color:g("history")},other:{label:"Other",color:g("other")}};function v(e){let{selectedSubjectFilter:t=null}=e,{currentUser:r}=(0,n.A)(),[p,v]=(0,d.useState)([]),[x,y]=(0,d.useState)(!0),[j,S]=(0,d.useState)(b),T=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e;if(!(null==r?void 0:r.uid)){y(!1),v([]),S(b),T.current&&(T.current(),T.current=null);return}y(!0);let s=(0,i.rJ)(o.db,"users",r.uid,"plannerTasks");return e=t&&"all"!==t?(0,i.P)(s,(0,i._M)("subject","==",t),(0,i._M)("status","==","completed")):(0,i.P)(s,(0,i._M)("status","==","completed")),T.current&&T.current(),T.current=(0,i.aQ)(e,e=>{console.log("SubjectTimeDistributionChart: Processing ".concat(e.size," completed task documents."));let t={};e.forEach(e=>{let r=e.data();if(r.subject&&"string"==typeof r.subject&&"number"==typeof r.duration&&r.duration>0){let e=r.subject.toLowerCase();t[e]=(t[e]||0)+r.duration}});let r=Object.entries(t).map(e=>{let[t,r]=e;return{subject:t.charAt(0).toUpperCase()+t.slice(1),hours:r,fill:g(t)}}).sort((e,t)=>t.hours-e.hours),s={hours:{label:"Hours"}};r.forEach(e=>{let t=e.subject.toLowerCase();s[t]||(s[t]={label:e.subject,color:e.fill})}),v(e=>!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r].subject!==t[r].subject||e[r].hours!==t[r].hours||e[r].fill!==t[r].fill)return!1;return!0}(e,r)?r:e),S(e=>!function(e,t){let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let s of r)if(!t[s]||e[s].label!==t[s].label||e[s].color!==t[s].color)return!1;return!0}(e,s)?s:e),y(!1)},e=>{console.error("Error fetching completed tasks for SubjectTimeDistributionChart: ",e),y(!1),v([]),S(b)}),()=>{T.current&&(T.current(),T.current=null)}},[null==r?void 0:r.uid,t]),(0,s.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center gap-4 space-y-0 pb-2",children:[(0,s.jsx)("div",{className:"bg-primary/10 p-3 rounded-lg",children:(0,s.jsx)(c.A,{className:"h-7 w-7 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(l.ZB,{className:"font-headline text-xl",children:"Subject Time Distribution"}),(0,s.jsx)(l.BT,{children:"Hours spent on each subject from completed tasks."})]})]}),(0,s.jsxs)(l.Wu,{className:"flex items-center justify-center min-h-[298px]",children:[x&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[(0,s.jsx)(u.A,{className:"h-8 w-8 animate-spin text-primary mb-2"}),(0,s.jsx)("p",{children:"Loading subject data..."})]}),!x&&0===p.length&&(0,s.jsxs)("p",{className:"text-muted-foreground text-center",children:["No completed tasks with subject data found. ",(0,s.jsx)("br",{}),"Complete some tasks in the planner to see this chart!"]}),!x&&p.length>0&&(0,s.jsx)(a.at,{config:j,className:"h-[250px] w-full max-w-[350px] sm:max-w-[400px] mx-auto",children:(0,s.jsxs)(h.r,{children:[(0,s.jsx)(ChartTooltip,{cursor:!1,content:(0,s.jsx)(a.Nt,{hideLabel:!0,nameKey:"subject"})}),(0,s.jsx)(m.F,{data:p,dataKey:"hours",nameKey:"subject",labelLine:!1,label:e=>{let{subject:t,percent:r,hours:s}=e;return r>.03?"".concat(t,": ").concat((100*r).toFixed(0),"% (").concat(s,"h)"):""},outerRadius:80,innerRadius:40,children:p.map(e=>(0,s.jsx)(f.f,{fill:e.fill,stroke:e.fill},"cell-".concat(e.subject)))}),(0,s.jsx)(a._3,{content:(0,s.jsx)(a._3,{className:"mt-4 text-xs"})})]})})]})]})}},56104:(e,t,r)=>{let s;r.d(t,{db:()=>u,j2:()=>c});var a=r(23915),l=r(93004),n=r(35317),o=r(86864);let i={apiKey:"AIzaSyAuHcdS5piYz3vMmCji71C-TgrYvZeC7Mw",authDomain:"studyplanner-4abf5.firebaseapp.com",projectId:"studyplanner-4abf5",storageBucket:"studyplanner-4abf5.firebasestorage.app",messagingSenderId:"193887379026",appId:"1:193887379026:web:34b7b5e1bde23d79c5898b",measurementId:"G-PZWY3Y7QBE"};i.apiKey&&i.projectId||console.error("CRITICAL FIREBASE CONFIGURATION ERROR: Firebase apiKey or projectId is missing or undefined.","This usually means your environment variables are not loaded correctly.","Please verify the following:","1. Your .env file is at the ROOT of your project.",'2. All Firebase related environment variables in .env START WITH "NEXT_PUBLIC_". (e.g., NEXT_PUBLIC_FIREBASE_API_KEY).',"3. You have RESTARTED your Next.js development server after making changes to the .env file.","4. The values in your .env file are correct and do not contain typos.","Current apiKey used for initialization: ".concat(i.apiKey),"Current projectId used for initialization: ".concat(i.projectId)),s=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)(i);let c=(0,l.xI)(s),u=(0,n.aU)(s);if(i.measurementId)try{(0,o.P5)(s)}catch(e){console.error("Firebase Analytics initialization error:",e)}(0,l.oM)(c,l.F0).catch(e=>{console.error("Firebase: Error setting auth persistence:",e.code,e.message)})},81499:(e,t,r)=>{r.d(t,{II:()=>f,Nt:()=>p,_3:()=>g,at:()=>h});var s=r(95155),a=r(12115),l=r(83540),n=r(94517),o=r(24026),i=r(59434);let c={light:"",dark:".dark"},u=a.createContext(null);function d(){let e=a.useContext(u);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let h=a.forwardRef((e,t)=>{let{id:r,className:n,children:o,config:c,...d}=e,h=a.useId(),f="chart-".concat(r||h.replace(/:/g,""));return(0,s.jsx)(u.Provider,{value:{config:c},children:(0,s.jsxs)("div",{"data-chart":f,ref:t,className:(0,i.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...d,children:[(0,s.jsx)(m,{id:f,config:c}),(0,s.jsx)(l.u,{children:o})]})})});h.displayName="Chart";let m=e=>{let{id:t,config:r}=e,a=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return a.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(c).map(e=>{let[r,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[s,a]=e,l=(null==(t=a.theme)?void 0:t[r])||a.color;return l?"  --color-".concat(s,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},f=n.m,p=a.forwardRef((e,t)=>{let{active:r,payload:l,className:n,indicator:o="dot",hideLabel:c=!1,hideIndicator:u=!1,label:h,labelFormatter:m,labelClassName:f,formatter:p,color:g,nameKey:v,labelKey:x}=e,{config:y}=d(),j=a.useMemo(()=>{var e;if(c||!(null==l?void 0:l.length))return null;let[t]=l,r="".concat(x||t.dataKey||t.name||"value"),a=b(y,t,r),n=x||"string"!=typeof h?null==a?void 0:a.label:(null==(e=y[h])?void 0:e.label)||h;return m?(0,s.jsx)("div",{className:(0,i.cn)("font-medium",f),children:m(n,l)}):n?(0,s.jsx)("div",{className:(0,i.cn)("font-medium",f),children:n}):null},[h,m,l,c,f,y,x]);if(!r||!(null==l?void 0:l.length))return null;let S=1===l.length&&"dot"!==o;return(0,s.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[S?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let r="".concat(v||e.name||e.dataKey||"value"),a=b(y,e,r),l=g||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,i.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.icon)?(0,s.jsx)(a.icon,{}):!u&&(0,s.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":S&&"dashed"===o}),style:{"--color-bg":l,"--color-border":l}}),(0,s.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",S?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[S?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});p.displayName="ChartTooltip";let g=o.s;function b(e,t,r){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=r;return r in t&&"string"==typeof t[r]?a=t[r]:s&&r in s&&"string"==typeof s[r]&&(a=s[r]),a in e?e[a]:e[r]}a.forwardRef((e,t)=>{let{className:r,hideIcon:a=!1,payload:l,verticalAlign:n="bottom",nameKey:o}=e,{config:c}=d();return(null==l?void 0:l.length)?(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",r),children:l.map(e=>{let t="".concat(o||e.dataKey||"value"),r=b(c,e,t);return(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!a?(0,s.jsx)(r.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend"},87481:(e,t,r)=>{r.d(t,{dj:()=>h});var s=r(12115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function u(e){c=o(c,e),i.forEach(e=>{e(c)})}function d(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,t]=s.useState(c);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}}}]);