"use strict";exports.id=9258,exports.ids=[9258],exports.modules={9180:(e,t,a)=>{a.d(t,{T:()=>d,t:()=>u});var r=a(33784),s=a(75535),n=a(73437),i=a(58261),o=a(89106),l=a(25928);async function d(e){if(!e||!r.db)return;let t=(0,s.H9)(r.db,"users",e,"userProfile","profile"),a=(0,n.GP)(new Date,"yyyy-MM-dd");try{let e=await (0,s.x7)(t),r={};e.exists()&&(r=e.data());let n=r.lastInteractionDates||[];if(!n.includes(a))if(n.push(a),(n=[...new Set(n)].sort((e,t)=>t.localeCompare(e))).length>14&&(n=n.slice(0,14)),e.exists())await (0,s.mZ)(t,{lastInteractionDates:n});else{let e={coins:0,xp:0,earnedBadgeIds:[],purchasedItemIds:[],onboardingCompleted:!1,lastInteractionDates:n,activeThemeId:r.activeThemeId||null,dailyChallengeStatus:r.dailyChallengeStatus||{},fullName:r.fullName||"",targetExams:r.targetExams||[],otherExamName:r.otherExamName||"",examAttemptYear:r.examAttemptYear||"",languageMedium:r.languageMedium||"",studyMode:r.studyMode||"",examPhase:r.examPhase||"",previousAttempts:r.previousAttempts||"",dailyStudyHours:r.dailyStudyHours||"",preferredStudyTime:r.preferredStudyTime||[],weakSubjects:r.weakSubjects||[],strongSubjects:r.strongSubjects||[],distractionStruggles:r.distractionStruggles||"",preferredLearningStyles:r.preferredLearningStyles||[],motivationType:r.motivationType||"",age:void 0===r.age?null:r.age,location:r.location||"",socialVisibilityPublic:r.socialVisibilityPublic||!1};await (0,s.BN)(t,e)}}catch(e){console.error("Error recording platform interaction:",e)}}async function u(e){if(!e||!r.db)return{unlocked:!1,displayProgress:0,progressTarget:7,message:"Log in to track your progress!",unlockReason:"none",studyStreakCount:0,interactionStreakCount:0};try{let t=(0,s.H9)(r.db,"users",e,"streaksData","main"),a=(0,s.H9)(r.db,"users",e,"userProfile","profile"),[n,d]=await Promise.all([(0,s.x7)(t),(0,s.x7)(a)]),u=n.exists()?n.data():{currentStreak:0,longestStreak:0,lastCheckInDate:null},c=d.exists()?d.data():{lastInteractionDates:[]},m=u.currentStreak||0,f=m>=7,g=c.lastInteractionDates||[],p=function(e){if(!e||0===e.length)return 0;let t=[...new Set(e)].map(e=>(0,i.H)(e)).sort((e,t)=>t.getTime()-e.getTime()),a=0,r=new Date;if(t.some(e=>0===(0,o.m)(r,e))){a=1;for(let e=1;e<7;e++){let s=(0,l.e)(r,e);if(t.some(e=>0===(0,o.m)(s,e)))a++;else break}}return Math.min(a,7)}(g),y=p>=7,N=0,x="",h="none";return f&&y?(h="both",N=7,x="You've unlocked it through both study and interaction streaks! (7/7)"):f?(h="study_streak",N=7,x=`Unlocked via your awesome ${m}-day study streak! (7/7)`):y?(h="interaction_streak",N=7,x=`Unlocked via your consistent ${p}-day platform activity! (7/7)`):(m>p?(N=m,x=`Current study streak: ${m}/7 days. Keep it up!`):p>0?(N=p,x=`Daily platform interaction: ${p}/7 consecutive days.`):(N=0,x="Start a 7-day study or interaction streak to unlock! (0/7)"),N=Math.min(N,7)),{unlocked:f||y,displayProgress:N,progressTarget:7,message:x,unlockReason:h,studyStreakCount:m,interactionStreakCount:p}}catch(e){return console.error("Error getting unlock status:",e),{unlocked:!1,displayProgress:0,progressTarget:7,message:"Could not retrieve progress. Please try again.",unlockReason:"none",studyStreakCount:0,interactionStreakCount:0}}}},44493:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>c});var r=a(60687),s=a(43210),n=a(4780);let i=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let u=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));c.displayName="CardFooter"},58261:(e,t,a)=>{a.d(t,{H:()=>s});var r=a(11392);function s(e,t){let a,s,f=t?.additionalDigits??2,g=function(e){let t,a={},r=e.split(n.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],n.timeZoneDelimiter.test(a.date)&&(a.date=e.split(n.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=n.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(g.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}(g.date,f);a=function(e,t){var a,r,s,n,o,l,u,f;if(null===t)return new Date(NaN);let g=e.match(i);if(!g)return new Date(NaN);let p=!!g[4],y=d(g[1]),N=d(g[2])-1,x=d(g[3]),h=d(g[4]),w=d(g[5])-1;if(p){return(a=0,r=h,s=w,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,h,w):new Date(NaN)}{let e=new Date(0);return(n=t,o=N,l=x,o>=0&&o<=11&&l>=1&&l<=(c[o]||(m(n)?29:28))&&(u=t,(f=y)>=1&&f<=(m(u)?366:365)))?(e.setUTCFullYear(t,N,Math.max(y,x)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);let p=a.getTime(),y=0;if(g.time&&isNaN(y=function(e){var t,a,s;let n=e.match(o);if(!n)return NaN;let i=u(n[1]),l=u(n[2]),d=u(n[3]);return(t=i,a=l,s=d,24===t?0===a&&0===s:s>=0&&s<60&&a>=0&&a<60&&t>=0&&t<25)?i*r.s0+l*r.Cg+1e3*d:NaN}(g.time)))return new Date(NaN);if(g.timezone){if(isNaN(s=function(e){var t,a;if("Z"===e)return 0;let s=e.match(l);if(!s)return 0;let n="+"===s[1]?-1:1,i=parseInt(s[2]),o=s[3]&&parseInt(s[3])||0;return(t=0,(a=o)>=0&&a<=59)?n*(i*r.s0+o*r.Cg):NaN}(g.timezone)))return new Date(NaN)}else{let e=new Date(p+y),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(p+y+s)}let n={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function u(e){return e&&parseFloat(e.replace(",","."))||0}let c=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}},63503:(e,t,a)=>{a.d(t,{Cf:()=>f,Es:()=>p,HM:()=>c,L3:()=>y,c7:()=>g,lG:()=>l,rr:()=>N,zM:()=>d});var r=a(60687),s=a(43210),n=a(26134),i=a(78726),o=a(4780);let l=n.bL,d=n.l9,u=n.ZL,c=n.bm,m=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(n.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));m.displayName=n.hJ.displayName;let f=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(n.UC,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=n.UC.displayName;let g=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});g.displayName="DialogHeader";let p=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});p.displayName="DialogFooter";let y=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(n.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));y.displayName=n.hE.displayName;let N=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(n.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));N.displayName=n.VY.displayName}};