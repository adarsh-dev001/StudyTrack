"use strict";exports.id=1068,exports.ids=[1068],exports.modules={11068:(e,r,t)=>{t.r(r),t.d(r,{PlannerView:()=>H});var s=t(60687),a=t(43210),l=t.n(a),d=t(44493),i=t(29523);let o=(0,t(82614).A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var n=t(15036),c=t(38765),x=t(57207),u=t(11516),m=t(97034),h=t(54052),p=t(92876),g=t(63503),b=t(76242),f=t(42692),y=t(4780),j=t(7112),k=t(33784),v=t(75535),N=t(85726),w=t(84645),A=t(96834),C=t(33660),T=t(90327),D=t(73437),S=t(9180);let M=l().lazy(()=>t.e(8730).then(t.bind(t,68730)));function E(){return(0,s.jsxs)("div",{className:"grid gap-4 py-4 max-h-[65vh] overflow-y-auto pr-3",children:[(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsx)(N.E,{className:"h-10 w-full"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsx)(N.E,{className:"h-10 w-full"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsx)(N.E,{className:"h-10 w-full"})]}),(0,s.jsx)(N.E,{className:"h-20 w-full"})]})}function H({selectedDate:e,selectedSubjectFilter:r,onDateChange:t,onViewChange:l}){let{currentUser:N}=(0,j.A)(),[H,z]=(0,a.useState)([]),[P,$]=(0,a.useState)(!0),[L,O]=(0,a.useState)({priority:"medium",status:"pending",duration:1,day:e.getDay(),startHour:9,subject:w.yo[0].id}),[V,Z]=(0,a.useState)(!1),[F,B]=(0,a.useState)(null),[W,G]=(0,a.useState)(null),I=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R=Array.from({length:15},(e,r)=>r+8),q=async()=>{if(!N||!k.db)return void console.error("User not logged in or DB not available");if(!L.title||!L.subject||void 0===L.day||void 0===L.startHour||void 0===L.duration)return void alert("Please fill in all required fields: Title, Subject, Day, Start Time, and Duration.");let r={userId:N.uid,title:L.title,subject:L.subject,topic:L.topic||"",description:L.description||"",duration:Number(L.duration)||1,priority:L.priority||"medium",status:"pending",day:Number(L.day),startHour:Number(L.startHour)};try{let t=(0,v.rJ)(k.db,"users",N.uid,"plannerTasks");await (0,v.gS)(t,r),N.uid&&await (0,S.T)(N.uid),O({title:"",topic:"",description:"",priority:"medium",status:"pending",duration:1,day:e.getDay(),startHour:9,subject:w.yo[0].id}),Z(!1)}catch(e){console.error("Error creating task: ",e),alert("Failed to create task. Please try again.")}},U=(e,r)=>{B(e),r.dataTransfer&&(r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("text/plain",e.id))},Y=(e,r,t)=>{t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move"),G({day:e,hour:r})},_=e=>{G(null)},J=async(e,r)=>{if(!N||!k.db||!F||!F.id)return;let t=(0,v.H9)(k.db,"users",N.uid,"plannerTasks",F.id);try{await (0,v.mZ)(t,{day:e,startHour:r}),N.uid&&await (0,S.T)(N.uid)}catch(e){console.error("Error updating task position: ",e)}B(null),G(null)},K=async e=>{if(!N||!k.db)return;let r=H.find(r=>r.id===e);if(!r)return;let t="completed"===r.status?"pending":"completed",s=(0,v.H9)(k.db,"users",N.uid,"plannerTasks",e);try{await (0,v.mZ)(s,{status:t}),"completed"===t&&N.uid&&await (0,S.T)(N.uid)}catch(e){console.error("Error updating task status: ",e)}},Q=async e=>{if(!N||!k.db||!window.confirm("Are you sure you want to delete this task?"))return;let r=(0,v.H9)(k.db,"users",N.uid,"plannerTasks",e);try{await (0,v.kd)(r),N.uid&&await (0,S.T)(N.uid)}catch(e){console.error("Error deleting task: ",e)}},X=r=>{let s=(0,C.k)(e,{weekStartsOn:0});t((0,T.f)(s,r)),l("day")},ee=e=>{let r=(0,w.nl)(e.subject),t=(0,w.kO)(e.priority),a=(0,w.DD)(e.startHour+e.duration);return(0,s.jsx)(b.Bc,{children:(0,s.jsxs)(b.m_,{delayDuration:300,children:[(0,s.jsx)(b.k$,{asChild:!0,children:(0,s.jsxs)("div",{draggable:!0,onDragStart:r=>U(e,r),className:(0,y.cn)("rounded-md p-2 mb-1.5 cursor-move shadow-sm border relative group transition-all duration-200 ease-out transform hover:shadow-lg hover:scale-[1.01]","completed"===e.status?"opacity-60 bg-opacity-70 line-through":"opacity-100",r.color,"text-sm"),style:{minHeight:`${2.25*Math.max(1,e.duration)}rem`},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-hidden pr-1",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(o,{className:"h-4 w-4 mr-1 opacity-50 shrink-0 group-hover:opacity-70"}),(0,s.jsx)("h4",{className:"font-semibold truncate",title:e.title,children:e.title})]}),(0,s.jsxs)("div",{className:"text-xs mt-0.5 mb-1 opacity-80",children:[(0,s.jsx)("span",{className:"font-medium",children:r.name}),e.topic&&(0,s.jsxs)("span",{className:"truncate block",title:e.topic,children:[" ",e.topic]})]}),(0,s.jsxs)("div",{className:"flex items-center text-xs opacity-70",children:[(0,s.jsx)(n.A,{className:"h-3 w-3 mr-1 shrink-0"}),(0,s.jsxs)("span",{children:[e.duration," ",1===e.duration?"hr":"hrs"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center ml-1 space-y-0.5",children:[(0,s.jsx)("button",{onClick:()=>K(e.id),className:"p-0.5 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"completed"===e.status?"Mark as pending":"Mark as completed",children:"completed"===e.status?(0,s.jsx)(c.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):(0,s.jsx)(c.A,{className:"h-4 w-4 opacity-40 hover:opacity-70"})}),(0,s.jsx)("button",{onClick:()=>Q(e.id),className:"p-0.5 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"Delete task",children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-red-500 hover:text-red-700 dark:hover:text-red-400"})})]})]}),e.priority&&(0,s.jsx)("div",{className:"mt-1.5",children:(0,s.jsx)(A.E,{variant:t.variant,className:t.className,children:t.text})})]})}),(0,s.jsxs)(b.ZI,{side:"top",align:"center",className:"w-64",children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Subject: ",r.name]}),e.topic&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Topic: ",e.topic]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Time: ",(0,w.DD)(e.startHour)," - ",a]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Duration: ",e.duration," hr(s)"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground capitalize",children:["Priority: ",e.priority]}),e.description&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Notes: ",e.description]})]})]})},e.id)};return(0,s.jsxs)("div",{className:"p-1 h-full flex flex-col",children:[N&&(0,s.jsx)("div",{className:"flex justify-end mb-3 px-1 shrink-0",children:(0,s.jsxs)(g.lG,{open:V,onOpenChange:Z,children:[(0,s.jsx)(g.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{size:"sm",variant:"default",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Add Task"]})}),(0,s.jsxs)(g.Cf,{className:"sm:max-w-lg",children:[(0,s.jsxs)(g.c7,{children:[(0,s.jsx)(g.L3,{children:"Add New Study Task"}),(0,s.jsxs)(g.rr,{children:["Fill in the details for your new study task. Fields marked with ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})," are required."]})]}),(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(E,{}),children:(0,s.jsx)(M,{newTask:L,onInputChange:e=>{let{name:r,value:t}=e.target;O(e=>({...e,[r]:t}))},onSelectChange:(e,r)=>{O(t=>({...t,[e]:r}))},isDayView:!1})}),(0,s.jsxs)(g.Es,{className:"mt-2 pt-4 border-t",children:[(0,s.jsx)(i.$,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),(0,s.jsx)(i.$,{onClick:q,disabled:!L.title||!L.subject||void 0===L.day||void 0===L.startHour||void 0===L.duration,children:"Save Task"})]})]})]})}),!N&&(0,s.jsx)(d.Zp,{className:"border-dashed flex-grow flex flex-col items-center justify-center min-h-[400px] bg-muted/20",children:(0,s.jsxs)(d.Wu,{className:"pt-6 text-center p-6",children:[(0,s.jsx)("div",{className:"mx-auto rounded-full bg-primary/10 p-4 w-16 h-16 flex items-center justify-center mb-4",children:(0,s.jsx)(p.A,{className:"h-8 w-8 text-primary"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"Login to Plan Your Studies"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Please login or sign up to start organizing your study schedule and track your progress."})]})}),N&&(0,s.jsx)(()=>{if(P)return(0,s.jsx)(d.Zp,{className:"border-dashed flex-grow flex flex-col items-center justify-center min-h-[400px] bg-muted/20",children:(0,s.jsxs)(d.Wu,{className:"text-center p-6",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading your study plan..."})]})});let t=H.filter(e=>!0);if(0===t.length&&!P)return(0,s.jsx)(d.Zp,{className:"border-dashed flex-grow flex flex-col items-center justify-center min-h-[400px] bg-muted/20",children:(0,s.jsxs)(d.Wu,{className:"text-center p-6",children:[(0,s.jsx)("div",{className:"mx-auto rounded-full bg-primary/10 p-4 w-16 h-16 flex items-center justify-center mb-4",children:(0,s.jsx)(m.A,{className:"h-8 w-8 text-primary"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:r&&"all"!==r?`No tasks for ${(0,w.nl)(r).name} yet.`:"Your Planner is Empty"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:r&&"all"!==r?"Add a new task for this subject or clear the filter to see all tasks.":"Get started by adding your first study task to the planner!"})]})});let a=(0,C.k)(e,{weekStartsOn:0});return(0,s.jsx)("div",{className:"overflow-auto flex-grow pb-2 -mx-1",children:(0,s.jsxs)("div",{className:"grid grid-cols-[auto_repeat(7,minmax(170px,1fr))] min-w-[1250px]",children:[(0,s.jsxs)("div",{className:"sticky left-0 bg-background z-10 border-r border-border",children:[(0,s.jsx)("div",{className:"h-12 border-b border-border"}),R.map(e=>(0,s.jsx)("div",{className:"h-24 flex items-center justify-center pr-2 text-xs font-medium text-muted-foreground border-b border-border",children:(0,s.jsxs)("span",{children:[e%12==0?12:e%12,e<12?"am":"pm"]})},`time-${e}`))]}),I.map((e,r)=>{let l=(0,T.f)(a,r);return(0,s.jsxs)("div",{className:"border-l border-border first:border-l-0",children:[(0,s.jsxs)("div",{onClick:()=>X(r),className:"h-12 flex flex-col items-center justify-center font-semibold text-sm sticky top-0 bg-background z-10 border-b border-border hover:bg-muted/60 transition-colors cursor-pointer px-1 text-center",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:(0,D.GP)(l,"d")})]}),R.map(e=>{let a=t.filter(t=>t.day===r&&t.startHour===e),l=W?.day===r&&W?.hour===e;return(0,s.jsx)("div",{className:(0,y.cn)("h-24 p-1 relative border-b border-border",l?"bg-accent/70 ring-1 ring-primary":"bg-muted/20 hover:bg-muted/40",a.length>0?"":"border-dashed border-border/60"),onDragOver:t=>Y(r,e,t),onDragLeave:_,onDrop:()=>J(r,e),children:(0,s.jsx)(f.F,{className:"h-full",children:(0,s.jsx)("div",{className:"p-px",children:a.length>0?a.map(e=>ee(e)):l&&F&&(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs opacity-70",children:"Drop here"})})})},`${r}-${e}`)})]},e)})]})})},{}),N&&H.length>0&&(0,s.jsxs)(d.Zp,{className:"mt-3 shrink-0",children:[(0,s.jsx)(d.aR,{className:"pb-2 pt-4",children:(0,s.jsx)(d.ZB,{className:"text-sm font-semibold",children:"Subject Color Legend"})}),(0,s.jsx)(d.Wu,{className:"pb-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-x-3 gap-y-2",children:w.yo.map(e=>(0,s.jsx)("div",{className:(0,y.cn)("px-2 py-0.5 rounded-full text-xs flex items-center border text-center",e.color),children:e.name},e.id))})})]})]})}},15036:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(82614).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},38765:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},42692:(e,r,t)=>{t.d(r,{F:()=>i});var s=t(60687),a=t(43210),l=t(68123),d=t(4780);let i=a.forwardRef(({className:e,children:r,...t},a)=>(0,s.jsxs)(l.bL,{ref:a,className:(0,d.cn)("relative overflow-hidden",e),...t,children:[(0,s.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(o,{}),(0,s.jsx)(l.OK,{})]}));i.displayName=l.bL.displayName;let o=a.forwardRef(({className:e,orientation:r="vertical",...t},a)=>(0,s.jsx)(l.VM,{ref:a,orientation:r,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:(0,s.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=l.VM.displayName},54052:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(82614).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},57207:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84645:(e,r,t)=>{t.d(r,{DD:()=>d,kO:()=>a,nl:()=>l,yo:()=>s});let s=[{id:"physics",name:"Physics",color:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 border-blue-300 dark:border-blue-700",textColor:"text-blue-800 dark:text-blue-100"},{id:"chemistry",name:"Chemistry",color:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 border-green-300 dark:border-green-700",textColor:"text-green-800 dark:text-green-100"},{id:"biology",name:"Biology",color:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-100 border-purple-300 dark:border-purple-700",textColor:"text-purple-800 dark:text-purple-100"},{id:"mathematics",name:"Mathematics",color:"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100 border-red-300 dark:border-red-700",textColor:"text-red-800 dark:text-red-100"},{id:"english",name:"English",color:"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100 border-yellow-300 dark:border-yellow-700",textColor:"text-yellow-800 dark:text-yellow-100"},{id:"history",name:"History",color:"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-100 border-orange-300 dark:border-orange-700",textColor:"text-orange-800 dark:text-orange-100"},{id:"other",name:"Other",color:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 border-gray-300 dark:border-gray-600",textColor:"text-gray-800 dark:text-gray-100"}],a=e=>{switch(e){case"high":return{text:"High",variant:"destructive",className:"bg-red-500 hover:bg-red-600 text-white"};case"medium":return{text:"Medium",variant:"default",className:"bg-yellow-500 hover:bg-yellow-600 text-white border-transparent"};case"low":return{text:"Low",variant:"outline",className:"bg-green-500 hover:bg-green-600 text-white border-green-600"};default:return{text:"Unknown",variant:"secondary"}}},l=e=>s.find(r=>r.id===e)||s.find(e=>"other"===e.id),d=e=>`${e%12==0?12:e%12} ${e>=12?"PM":"AM"}`},96834:(e,r,t)=>{t.d(r,{E:()=>i});var s=t(60687);t(43210);var a=t(24224),l=t(4780);let d=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,l.cn)(d({variant:r}),e),...t})}},97034:(e,r,t)=>{t.d(r,{A:()=>s});let s=(0,t(82614).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])}};