"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5737],{27600:(e,t,a)=>{a.d(t,{A:()=>d,AuthProvider:()=>u});var r=a(95155),s=a(93004),i=a(35695),n=a(12115),o=a(56104),l=a(87481);let c=(0,n.createContext)(void 0);function d(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{children:t}=e,[a,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!0),[m,y]=(0,n.useState)(null),f=(0,i.useRouter)(),{toast:g}=(0,l.dj)();(0,n.useEffect)(()=>(0,s.hg)(o.j2,e=>{d(e),p(!1)},e=>{y(e.message),p(!1),g({title:"Authentication Error",description:e.message,variant:"destructive"})}),[g]);let h=(0,n.useCallback)(async(e,t,a)=>{p(!0),y(null);try{let r=await (0,s.eJ)(o.j2,e,t);await (0,s.r7)(r.user,{displayName:a}),d(r.user),g({title:"Signup Successful!",description:"Welcome to StudyTrack!"}),f.push("/dashboard")}catch(e){y(e.message),"auth/email-already-in-use"===e.code?g({title:"Signup Failed",description:"This email address is already registered. Please use a different email or try logging in.",variant:"destructive"}):g({title:"Signup Failed",description:e.message,variant:"destructive"})}finally{p(!1)}},[o.j2,f,g]),S=(0,n.useCallback)(async(e,t)=>{p(!0),y(null);try{await (0,s.x9)(o.j2,e,t),g({title:"Login Successful!",description:"Welcome back!"}),f.push("/dashboard")}catch(e){y(e.message),g({title:"Login Failed",description:e.message,variant:"destructive"})}finally{p(!1)}},[o.j2,f,g]),v=(0,n.useCallback)(async()=>{p(!0),y(null);try{await (0,s.CI)(o.j2),g({title:"Logged Out",description:"You have been successfully logged out."}),f.push("/login")}catch(e){y(e.message),g({title:"Logout Failed",description:e.message,variant:"destructive"})}finally{p(!1)}},[o.j2,f,g]),T=(0,n.useMemo)(()=>({currentUser:a,loading:u,error:m,signUp:h,signIn:S,logOut:v}),[a,u,m,h,S,v]);return(0,r.jsx)(c.Provider,{value:T,children:t})}},30688:(e,t,a)=>{a.d(t,{T:()=>c,t:()=>d});var r=a(56104),s=a(35317),i=a(83013),n=a(83343),o=a(39140),l=a(78816);async function c(e){if(!e||!r.db)return;let t=(0,s.H9)(r.db,"users",e,"userProfile","profile"),a=(0,i.GP)(new Date,"yyyy-MM-dd");try{let e=await (0,s.x7)(t),r={};e.exists()&&(r=e.data());let i=r.lastInteractionDates||[];if(!i.includes(a))if(i.push(a),(i=[...new Set(i)].sort((e,t)=>t.localeCompare(e))).length>14&&(i=i.slice(0,14)),e.exists())await (0,s.mZ)(t,{lastInteractionDates:i});else{let e={coins:0,xp:0,earnedBadgeIds:[],purchasedItemIds:[],onboardingCompleted:!1,lastInteractionDates:i,activeThemeId:r.activeThemeId||null,dailyChallengeStatus:r.dailyChallengeStatus||{},fullName:r.fullName||"",targetExams:r.targetExams||[],otherExamName:r.otherExamName||"",examAttemptYear:r.examAttemptYear||"",languageMedium:r.languageMedium||"",studyMode:r.studyMode||"",examPhase:r.examPhase||"",previousAttempts:r.previousAttempts||"",dailyStudyHours:r.dailyStudyHours||"",preferredStudyTime:r.preferredStudyTime||[],weakSubjects:r.weakSubjects||[],strongSubjects:r.strongSubjects||[],distractionStruggles:r.distractionStruggles||"",preferredLearningStyles:r.preferredLearningStyles||[],motivationType:r.motivationType||"",age:void 0===r.age?null:r.age,location:r.location||"",socialVisibilityPublic:r.socialVisibilityPublic||!1};await (0,s.BN)(t,e)}}catch(e){console.error("Error recording platform interaction:",e)}}async function d(e){if(!e||!r.db)return{unlocked:!1,displayProgress:0,progressTarget:7,message:"Log in to track your progress!",unlockReason:"none",studyStreakCount:0,interactionStreakCount:0};try{let t=(0,s.H9)(r.db,"users",e,"streaksData","main"),a=(0,s.H9)(r.db,"users",e,"userProfile","profile"),[i,c]=await Promise.all([(0,s.x7)(t),(0,s.x7)(a)]),d=i.exists()?i.data():{currentStreak:0,longestStreak:0,lastCheckInDate:null},u=c.exists()?c.data():{lastInteractionDates:[]},p=d.currentStreak||0,m=p>=7,y=u.lastInteractionDates||[],f=function(e){if(!e||0===e.length)return 0;let t=[...new Set(e)].map(e=>(0,n.H)(e)).sort((e,t)=>t.getTime()-e.getTime()),a=0,r=new Date;if(t.some(e=>0===(0,o.m)(r,e))){a=1;for(let e=1;e<7;e++){let s=(0,l.e)(r,e);if(t.some(e=>0===(0,o.m)(s,e)))a++;else break}}return Math.min(a,7)}(y),g=f>=7,h=0,S="",v="none";return m&&g?(v="both",h=7,S="You've unlocked it through both study and interaction streaks! (".concat(7,"/").concat(7,")")):m?(v="study_streak",h=7,S="Unlocked via your awesome ".concat(p,"-day study streak! (").concat(7,"/").concat(7,")")):g?(v="interaction_streak",h=7,S="Unlocked via your consistent ".concat(f,"-day platform activity! (").concat(7,"/").concat(7,")")):(p>f?(h=p,S="Current study streak: ".concat(p,"/").concat(7," days. Keep it up!")):f>0?(h=f,S="Daily platform interaction: ".concat(f,"/").concat(7," consecutive days.")):(h=0,S="Start a 7-day study or interaction streak to unlock! (0/".concat(7,")")),h=Math.min(h,7)),{unlocked:m||g,displayProgress:h,progressTarget:7,message:S,unlockReason:v,studyStreakCount:p,interactionStreakCount:f}}catch(e){return console.error("Error getting unlock status:",e),{unlocked:!1,displayProgress:0,progressTarget:7,message:"Could not retrieve progress. Please try again.",unlockReason:"none",studyStreakCount:0,interactionStreakCount:0}}}},56104:(e,t,a)=>{let r;a.d(t,{db:()=>d,j2:()=>c});var s=a(23915),i=a(93004),n=a(35317),o=a(86864);let l={apiKey:"AIzaSyAuHcdS5piYz3vMmCji71C-TgrYvZeC7Mw",authDomain:"studyplanner-4abf5.firebaseapp.com",projectId:"studyplanner-4abf5",storageBucket:"studyplanner-4abf5.firebasestorage.app",messagingSenderId:"193887379026",appId:"1:193887379026:web:34b7b5e1bde23d79c5898b",measurementId:"G-PZWY3Y7QBE"};l.apiKey&&l.projectId||console.error("CRITICAL FIREBASE CONFIGURATION ERROR: Firebase apiKey or projectId is missing or undefined.","This usually means your environment variables are not loaded correctly.","Please verify the following:","1. Your .env file is at the ROOT of your project.",'2. All Firebase related environment variables in .env START WITH "NEXT_PUBLIC_". (e.g., NEXT_PUBLIC_FIREBASE_API_KEY).',"3. You have RESTARTED your Next.js development server after making changes to the .env file.","4. The values in your .env file are correct and do not contain typos.","Current apiKey used for initialization: ".concat(l.apiKey),"Current projectId used for initialization: ".concat(l.projectId)),r=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(l);let c=(0,i.xI)(r),d=(0,n.aU)(r);if(l.measurementId)try{(0,o.P5)(r)}catch(e){console.error("Firebase Analytics initialization error:",e)}(0,i.oM)(c,i.F0).catch(e=>{console.error("Firebase: Error setting auth persistence:",e.code,e.message)})},66695:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var r=a(95155),s=a(12115),i=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},87481:(e,t,a)=>{a.d(t,{dj:()=>p});var r=a(12115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}}]);