"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7036],{27036:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var a=r(95155),s=r(12115),o=r(66695),l=r(30285),n=r(31550),i=r(965),d=r(73158),c=r(50172);let u=(0,r(40157).A)("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var m=r(19164),x=r(74641),p=r(34548),g=r(65119),h=r(35476),b=r(78039),f=r(83013),y=r(33520),w=r(76959),v=r(59434),k=r(27600),j=r(56104),N=r(35317),S=r(43081);function T(e){let{selectedDate:t,onDateChange:r,onViewChange:T,selectedSubjectFilter:A}=e,{currentUser:C}=(0,k.A)(),[E,I]=(0,s.useState)((0,m.w)(t)),[M,O]=(0,s.useState)([]),[P,R]=(0,s.useState)(!0);(0,s.useEffect)(()=>{I((0,m.w)(t))},[t]),(0,s.useEffect)(()=>{let e;if(!C||!j.db){O([]),R(!1);return}R(!0);let t=(0,N.rJ)(j.db,"users",C.uid,"plannerTasks");e=A&&"all"!==A?(0,N.P)(t,(0,N._M)("subject","==",A)):(0,N.P)(t);let r=(0,N.aQ)(e,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),O(t),R(!1)},e=>{console.error("Error fetching tasks for MonthView: ",e),R(!1)});return()=>r()},[C,A]);let _=(0,s.useMemo)(()=>{let e=(0,m.w)(E),t=(0,x.p)(E);return function(e,t){let r=(0,h.a)(e.start),a=(0,h.a)(e.end),s=+r>+a,o=s?+r:+a,l=s?a:r;l.setHours(0,0,0,0);let n=1;if(!n)return[];n<0&&(n=-n,s=!s);let i=[];for(;+l<=o;)i.push((0,h.a)(l)),l.setDate(l.getDate()+n),l.setHours(0,0,0,0);return s?i.reverse():i}({start:(0,p.k)(e,{weekStartsOn:0}),end:(0,g.$)(t,{weekStartsOn:0})})},[E]),D=(0,s.useMemo)(()=>{let e={0:[],1:[],2:[],3:[],4:[],5:[],6:[]};return M.forEach(t=>{e[t.day]&&e[t.day].push(t)}),e},[M]),F=e=>{r(e),T("day")};return C?(0,a.jsxs)(o.Zp,{className:"shadow-lg flex-grow flex flex-col",children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between pb-3 sm:pb-4 pt-4 sm:pt-5 px-2 sm:px-4 md:px-6",children:[(0,a.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{I((0,b.P)(E,-1))},"aria-label":"Previous month",className:"h-8 w-8 sm:h-9 sm:w-9",children:(0,a.jsx)(i.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,a.jsx)(o.ZB,{className:"text-md sm:text-lg md:text-xl font-bold text-center mx-2",children:(0,f.GP)(E,"MMMM yyyy")}),(0,a.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{I((0,b.P)(E,1))},"aria-label":"Next month",className:"h-8 w-8 sm:h-9 sm:w-9",children:(0,a.jsx)(d.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),(0,a.jsxs)(o.Wu,{className:"flex-grow flex flex-col p-1 sm:p-1.5",children:[P&&(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"h-8 w-8 sm:h-10 sm:w-10 animate-spin text-primary"})}),!P&&(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-px bg-border flex-grow border-l border-t",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"py-1 sm:py-1.5 text-center text-xs font-medium text-muted-foreground bg-muted/50 border-r border-b",children:e.substring(0,3)},e)),_.map(e=>{let r=D[(0,h.a)(e).getDay()]||[],s=(0,y.t)(e,E),o=(0,w.r)(e,t),l=(0,w.r)(e,new Date),n=window.innerWidth<768?2:4;return(0,a.jsxs)("div",{className:(0,v.cn)("p-1 min-h-[40px] xs:min-h-[50px] sm:min-h-[60px] md:min-h-[80px] cursor-pointer relative transition-colors duration-150 ease-in-out border-r border-b flex flex-col",s?"bg-background hover:bg-secondary/60":"bg-muted/30 text-muted-foreground/50 hover:bg-muted/50",o&&"bg-primary/20 ring-1 sm:ring-2 ring-primary z-10",l&&!o&&"bg-accent/10"),onClick:()=>F(e),children:[(0,a.jsx)("span",{className:(0,v.cn)("text-[10px] sm:text-xs self-start tabular-nums",l&&"font-bold text-primary"),children:(0,f.GP)(e,"d")}),s&&r.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-px mt-auto justify-start items-end",children:[r.slice(0,n).map(e=>(0,a.jsx)(u,{className:(0,v.cn)("h-2 w-2 sm:h-2.5 sm:w-2.5",(0,S.nl)(e.subject).textColor)},e.id)),r.length>n&&(0,a.jsxs)("span",{className:"text-[8px] sm:text-[10px] text-muted-foreground leading-tight ml-0.5",children:["+ ",r.length-n]})]})]},e.toString())})]})]})]}):(0,a.jsx)(o.Zp,{className:"border-dashed flex-grow flex flex-col items-center justify-center min-h-[300px] sm:min-h-[400px] bg-muted/20 p-4",children:(0,a.jsxs)(o.Wu,{className:"pt-6 text-center",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mx-auto mb-3 sm:mb-4"}),(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-1.5 sm:mb-2",children:"Login to View Monthly Plan"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Please login to see your tasks on the calendar."})]})})}},27600:(e,t,r)=>{r.d(t,{A:()=>c,AuthProvider:()=>u});var a=r(95155),s=r(93004),o=r(35695),l=r(12115),n=r(56104),i=r(87481);let d=(0,l.createContext)(void 0);function c(){let e=(0,l.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{children:t}=e,[r,c]=(0,l.useState)(null),[u,m]=(0,l.useState)(!0),[x,p]=(0,l.useState)(null),g=(0,o.useRouter)(),{toast:h}=(0,i.dj)();(0,l.useEffect)(()=>(0,s.hg)(n.j2,e=>{c(e),m(!1)},e=>{p(e.message),m(!1),h({title:"Authentication Error",description:e.message,variant:"destructive"})}),[h]);let b=(0,l.useCallback)(async(e,t,r)=>{m(!0),p(null);try{let a=await (0,s.eJ)(n.j2,e,t);await (0,s.r7)(a.user,{displayName:r}),c(a.user),h({title:"Signup Successful!",description:"Welcome to StudyTrack!"}),g.push("/dashboard")}catch(e){p(e.message),"auth/email-already-in-use"===e.code?h({title:"Signup Failed",description:"This email address is already registered. Please use a different email or try logging in.",variant:"destructive"}):h({title:"Signup Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[n.j2,g,h]),f=(0,l.useCallback)(async(e,t)=>{m(!0),p(null);try{await (0,s.x9)(n.j2,e,t),h({title:"Login Successful!",description:"Welcome back!"}),g.push("/dashboard")}catch(e){p(e.message),h({title:"Login Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[n.j2,g,h]),y=(0,l.useCallback)(async()=>{m(!0),p(null);try{await (0,s.CI)(n.j2),h({title:"Logged Out",description:"You have been successfully logged out."}),g.push("/login")}catch(e){p(e.message),h({title:"Logout Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[n.j2,g,h]),w=(0,l.useMemo)(()=>({currentUser:r,loading:u,error:x,signUp:b,signIn:f,logOut:y}),[r,u,x,b,f,y]);return(0,a.jsx)(d.Provider,{value:w,children:t})}},31550:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(40157).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},43081:(e,t,r)=>{r.d(t,{DD:()=>l,kO:()=>s,nl:()=>o,yo:()=>a});let a=[{id:"physics",name:"Physics",color:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 border-blue-300 dark:border-blue-700",textColor:"text-blue-800 dark:text-blue-100"},{id:"chemistry",name:"Chemistry",color:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 border-green-300 dark:border-green-700",textColor:"text-green-800 dark:text-green-100"},{id:"biology",name:"Biology",color:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-100 border-purple-300 dark:border-purple-700",textColor:"text-purple-800 dark:text-purple-100"},{id:"mathematics",name:"Mathematics",color:"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100 border-red-300 dark:border-red-700",textColor:"text-red-800 dark:text-red-100"},{id:"english",name:"English",color:"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-100 border-yellow-300 dark:border-yellow-700",textColor:"text-yellow-800 dark:text-yellow-100"},{id:"history",name:"History",color:"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-100 border-orange-300 dark:border-orange-700",textColor:"text-orange-800 dark:text-orange-100"},{id:"other",name:"Other",color:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 border-gray-300 dark:border-gray-600",textColor:"text-gray-800 dark:text-gray-100"}],s=e=>{switch(e){case"high":return{text:"High",variant:"destructive",className:"bg-red-500 hover:bg-red-600 text-white"};case"medium":return{text:"Medium",variant:"default",className:"bg-yellow-500 hover:bg-yellow-600 text-white border-transparent"};case"low":return{text:"Low",variant:"outline",className:"bg-green-500 hover:bg-green-600 text-white border-green-600"};default:return{text:"Unknown",variant:"secondary"}}},o=e=>a.find(t=>t.id===e)||a.find(e=>"other"===e.id),l=e=>"".concat(e%12==0?12:e%12," ").concat(e>=12?"PM":"AM")},56104:(e,t,r)=>{let a;r.d(t,{db:()=>c,j2:()=>d});var s=r(23915),o=r(93004),l=r(35317),n=r(86864);let i={apiKey:"AIzaSyAuHcdS5piYz3vMmCji71C-TgrYvZeC7Mw",authDomain:"studyplanner-4abf5.firebaseapp.com",projectId:"studyplanner-4abf5",storageBucket:"studyplanner-4abf5.firebasestorage.app",messagingSenderId:"193887379026",appId:"1:193887379026:web:34b7b5e1bde23d79c5898b",measurementId:"G-PZWY3Y7QBE"};i.apiKey&&i.projectId||console.error("CRITICAL FIREBASE CONFIGURATION ERROR: Firebase apiKey or projectId is missing or undefined.","This usually means your environment variables are not loaded correctly.","Please verify the following:","1. Your .env file is at the ROOT of your project.",'2. All Firebase related environment variables in .env START WITH "NEXT_PUBLIC_". (e.g., NEXT_PUBLIC_FIREBASE_API_KEY).',"3. You have RESTARTED your Next.js development server after making changes to the .env file.","4. The values in your .env file are correct and do not contain typos.","Current apiKey used for initialization: ".concat(i.apiKey),"Current projectId used for initialization: ".concat(i.projectId)),a=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(i);let d=(0,o.xI)(a),c=(0,l.aU)(a);if(i.measurementId)try{(0,n.P5)(a)}catch(e){console.error("Firebase Analytics initialization error:",e)}(0,o.oM)(d,o.F0).catch(e=>{console.error("Firebase: Error setting auth persistence:",e.code,e.message)})},66695:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n,wL:()=>u});var a=r(95155),s=r(12115),o=r(59434);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},87481:(e,t,r)=>{r.d(t,{dj:()=>m});var a=r(12115);let s=0,o=new Map,l=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=n(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}}]);