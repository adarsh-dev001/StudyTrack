"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8120],{7455:(e,t,r)=>{r.d(t,{EE:()=>c,mS:()=>d});var a=r(36936),s=r(68027),o=r(82733);let n={id:"default_light_theme",name:"Default Light",description:"The standard light theme for StudyTrack.",price:0,icon:a.A,category:"Theme",colorClass:"bg-slate-100 border-slate-300 text-slate-700",themeDetails:{background:"210 20% 96.1%",foreground:"0 0% 3.9%",card:"0 0% 100%",cardForeground:"0 0% 3.9%",popover:"0 0% 100%",popoverForeground:"0 0% 3.9%",primary:"200 95% 74.5%",primaryForeground:"0 0% 3.9%",secondary:"210 20% 90%",secondaryForeground:"0 0% 9%",muted:"210 20% 92%",mutedForeground:"0 0% 45.1%",accent:"26 95% 53.1%",accentForeground:"0 0% 98%",destructive:"0 84.2% 60.2%",destructiveForeground:"0 0% 98%",border:"210 20% 85%",input:"0 0% 100%",ring:"200 95% 74.5%"}},i={id:"crimson_dark_theme",name:"Crimson Dark",description:"A sleek dark theme with crimson accents.",price:150,icon:s.A,category:"Theme",colorClass:"bg-red-800/10 border-red-800/30 text-red-300",themeDetails:{background:"0 0% 8%",foreground:"0 0% 90%",card:"0 0% 12%",cardForeground:"0 0% 90%",popover:"0 0% 10%",popoverForeground:"0 0% 90%",primary:"348 83% 47%",primaryForeground:"0 0% 98%",secondary:"0 0% 15%",secondaryForeground:"0 0% 80%",muted:"0 0% 20%",mutedForeground:"0 0% 60%",accent:"348 83% 57%",accentForeground:"0 0% 98%",destructive:"0 70% 50%",destructiveForeground:"0 0% 98%",border:"0 0% 25%",input:"0 0% 15%",ring:"348 83% 47%",sidebarBackground:"0 0% 5%",sidebarForeground:"0 0% 85%"}},l={id:"ocean_blue_theme",name:"Ocean Blue",description:"A refreshing light theme with deep blue and teal accents.",price:120,icon:o.A,category:"Theme",colorClass:"bg-sky-600/10 border-sky-600/30 text-sky-300",themeDetails:{background:"205 50% 95%",foreground:"215 30% 25%",card:"0 0% 100%",cardForeground:"215 30% 25%",popover:"0 0% 100%",popoverForeground:"215 30% 25%",primary:"210 85% 55%",primaryForeground:"0 0% 100%",secondary:"190 50% 90%",secondaryForeground:"190 30% 30%",muted:"200 40% 92%",mutedForeground:"200 20% 50%",accent:"170 70% 45%",accentForeground:"0 0% 100%",destructive:"0 80% 60%",destructiveForeground:"0 0% 100%",border:"200 30% 80%",input:"0 0% 100%",ring:"210 85% 55%"}},d=n.id,c=[i,l]},8120:(e,t,r)=>{r.r(t),r.d(t,{PomodoroTimer:()=>F});var a=r(95155),s=r(12115),o=r(30285),n=r(66695),i=r(17313),l=r(59409),d=r(59099),c=r(53764),u=r(13300),m=r(8531),f=r(57789),p=r(86406),g=r(27600),x=r(56104),h=r(35317),b=r(87481),v=r(33436),y=r(7455),w=r(60620),j=r(54073),N=r(59434);let k=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(j.bL,{ref:t,className:(0,N.cn)("relative flex w-full touch-none select-none items-center",r),...s,children:[(0,a.jsx)(j.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(j.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(j.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});k.displayName=j.bL.displayName;let C=e=>{let{src:t,loop:r=!0,volume:n=.7,isPlaying:i,onEnded:l,label:d,autoPlay:m=!1,className:p}=e,g=(0,s.useRef)(null),x=void 0!==i,h=!x&&!!d,[b,v]=(0,s.useState)(h&&m&&!!t),[y,j]=(0,s.useState)(n),C=x?i:b;return((0,s.useEffect)(()=>{g.current&&(g.current.loop=r)},[r]),(0,s.useEffect)(()=>{let e=g.current;e&&(x?e.volume=Math.max(0,Math.min(1,n)):e.volume=Math.max(0,Math.min(1,y)))},[n,y,x]),(0,s.useEffect)(()=>{let e=g.current;e&&(null===t||e.src&&!e.src.endsWith("null")&&e.src!==t)&&(e.src=t||"",t?(e.load(),C&&e.play().catch(e=>console.error("Error playing new src:",e))):e.pause())},[t,C]),(0,s.useEffect)(()=>{let e=g.current;e&&(C&&e.src&&!e.src.endsWith("null")?e.play().catch(e=>console.error("Error playing audio:",e)):e.pause())},[C,t]),(0,s.useEffect)(()=>{let e=g.current;if(e){let t=()=>{h&&!r&&v(!1),l&&!r&&l()};return e.addEventListener("ended",t),()=>{e.removeEventListener("ended",t)}}},[r,l,h]),h)?(0,a.jsxs)("div",{className:(0,N.cn)("flex flex-col space-y-2 p-3 border rounded-lg bg-card shadow-sm",p),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-card-foreground mr-2 truncate",title:d,children:d}),(0,a.jsx)(o.$,{onClick:()=>{h&&v(e=>!e)},variant:"ghost",size:"icon","aria-label":C?"Pause":"Play",disabled:!t,children:C?(0,a.jsx)(c.A,{className:"h-5 w-5"}):(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[y>0?(0,a.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(k,{defaultValue:[y],max:1,step:.01,onValueChange:e=>{h&&j(e[0])},className:"w-full","aria-label":"Volume",disabled:!t})]}),(0,a.jsx)("audio",{ref:g,playsInline:!0,preload:"auto","aria-hidden":"true"})]}):(0,a.jsx)("audio",{ref:g,playsInline:!0,preload:"auto","aria-hidden":"true"})};var S=r(30688);let A={pomodoro:1500,shortBreak:300,longBreak:900};function F(){var e,t;let{currentUser:r}=(0,g.A)(),{toast:w}=(0,b.dj)(),[j,k]=(0,s.useState)("pomodoro"),[F,P]=(0,s.useState)(A[j]),[_,B]=(0,s.useState)(!1),[E,R]=(0,s.useState)(0),[L]=(0,s.useState)(v.U2),[T,z]=(0,s.useState)(null),U=e=>{let t=Math.floor(e/60);return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},I=(0,s.useCallback)(async()=>{if(!(null==r?void 0:r.uid)||!x.db)return;await (0,S.T)(r.uid);let e=(0,h.H9)(x.db,"users",r.uid,"userProfile","profile");try{let t=await (0,h.x7)(e),r={coins:0,xp:0,earnedBadgeIds:[],purchasedItemIds:[],activeThemeId:y.mS,dailyChallengeStatus:{},lastInteractionDates:[]};t.exists()&&(r={...r,...t.data()});let a=r.coins+5,s={...r,coins:a};t.exists()?await (0,h.mZ)(e,s):await (0,h.BN)(e,s),w({title:"Pomodoro Complete! \uD83C\uDF89",description:"âœ¨ +".concat(5," Coins for completing a focus session! Keep it up!")})}catch(e){console.error("Error awarding coins for Pomodoro:",e),w({title:"Coin Award Error",description:"Could not update your coin balance for the Pomodoro session.",variant:"destructive"})}},[r,w]);(0,s.useEffect)(()=>{let e=null;return _&&F>0&&(e=setInterval(()=>{P(e=>e-1)},1e3)),()=>{e&&clearInterval(e)}},[_,F]),(0,s.useEffect)(()=>{if(0===F&&_)if("pomodoro"===j){r&&I();let e=E+1;R(e),e%4==0?k("longBreak"):k("shortBreak")}else k("pomodoro")},[F,j,E,_,I,r]),(0,s.useEffect)(()=>{P(A[j]),B(!1)},[j]);let V=(0,s.useCallback)(()=>{B(!1),P(A[j])},[j]);return(0,s.useEffect)(()=>{let e="StudyTrack";return _?document.title="".concat(U(F)," - ").concat(j.charAt(0).toUpperCase()+j.slice(1).replace("B"," B")," - ").concat(e):0!==F||"pomodoro"!==j||_?0!==F||"shortBreak"!==j&&"longBreak"!==j||_?document.title="Pomodoro Timer - ".concat(e):document.title="Back to Study! - ".concat(e):document.title="Break Time! - ".concat(e),()=>{document.title=e}},[F,_,j]),(0,a.jsxs)(n.Zp,{className:"w-full max-w-sm sm:max-w-md mx-auto shadow-xl",children:[(0,a.jsx)(n.aR,{className:"text-center p-4 sm:p-6",children:(0,a.jsxs)(n.ZB,{className:"font-headline text-2xl flex items-center justify-center",children:[(0,a.jsx)(d.A,{className:"mr-2 h-7 w-7 text-primary"}),"Pomodoro Timer"]})}),(0,a.jsxs)(n.Wu,{className:"flex flex-col items-center space-y-4 sm:space-y-6 p-4 sm:p-6 pt-2",children:[(0,a.jsx)(i.tU,{value:j,onValueChange:e=>{k(e)},className:"w-full",children:(0,a.jsxs)(i.j7,{className:"flex flex-col sm:flex-row w-full h-auto rounded-lg bg-muted p-1 gap-1",children:[(0,a.jsx)(i.Xi,{value:"pomodoro",className:(0,N.cn)("flex-1 justify-center items-center whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-red-500 data-[state=active]:text-white data-[state=active]:font-semibold data-[state=active]:shadow-lg data-[state=active]:transform data-[state=active]:translate-y-px","bg-muted text-muted-foreground hover:bg-red-100 hover:text-red-700 dark:hover:bg-red-900/50 dark:hover:text-red-300"),children:"Pomodoro"}),(0,a.jsx)(i.Xi,{value:"shortBreak",className:(0,N.cn)("flex-1 justify-center items-center whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-green-500 data-[state=active]:text-white data-[state=active]:font-semibold data-[state=active]:shadow-lg data-[state=active]:transform data-[state=active]:translate-y-px","bg-muted text-muted-foreground hover:bg-green-100 hover:text-green-700 dark:hover:bg-green-900/50 dark:hover:text-green-300"),children:"Short Break"}),(0,a.jsx)(i.Xi,{value:"longBreak",className:(0,N.cn)("flex-1 justify-center items-center whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:font-semibold data-[state=active]:shadow-lg data-[state=active]:transform data-[state=active]:translate-y-px","bg-muted text-muted-foreground hover:bg-blue-100 hover:text-blue-700 dark:hover:bg-blue-900/50 dark:hover:text-blue-300"),children:"Long Break"})]})}),(0,a.jsx)("div",{className:"text-6xl sm:text-7xl md:text-8xl font-bold text-foreground tabular-nums my-4 sm:my-6","aria-live":"polite",children:U(F)}),(0,a.jsxs)("div",{className:"flex flex-col xs:flex-row space-y-2 xs:space-y-0 xs:space-x-3 w-full max-w-xs",children:[(0,a.jsxs)(o.$,{onClick:()=>{B(e=>!e)},className:"flex-1 text-base py-3 h-auto",size:"lg","aria-label":_?"Pause timer":"Start timer",disabled:!r&&"pomodoro"===j,children:[_?(0,a.jsx)(c.A,{className:"mr-2 h-5 w-5"}):(0,a.jsx)(u.A,{className:"mr-2 h-5 w-5"}),_?"Pause":"Start"]}),(0,a.jsxs)(o.$,{onClick:V,variant:"outline",className:"flex-1 text-base py-3 h-auto",size:"lg","aria-label":"Reset timer",children:[(0,a.jsx)(m.A,{className:"mr-2 h-5 w-5"}),"Reset"]})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Completed in cycle: ",E%4," (next long break after ",4,")"]}),!r&&"pomodoro"===j&&(0,a.jsx)("p",{className:"text-xs text-destructive text-center mt-1",children:"Login to track Pomodoros and earn rewards!"})]}),(0,a.jsxs)(n.wL,{className:"flex flex-col items-center space-y-3 sm:space-y-4 p-4 sm:p-6 border-t",children:[(0,a.jsxs)("div",{className:"w-full max-w-xs",children:[(0,a.jsxs)(l.l6,{onValueChange:e=>{if("none"===e)z(null);else{let t=v.U2.find(t=>t.id===e);t&&z(t.filePath)}},defaultValue:T?null==(e=L.find(e=>e.filePath===T))?void 0:e.id:"none",disabled:0===L.length,children:[(0,a.jsx)(l.bq,{className:"w-full",children:(0,a.jsx)(l.yv,{placeholder:"Select Soundtrack..."})}),(0,a.jsxs)(l.gC,{children:[(0,a.jsx)(l.eb,{value:"none",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"})," No Sound"]})}),L.map(e=>(0,a.jsx)(l.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"})," ",e.name]})},e.id))]})]}),0===L.length&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-1",children:"No soundtracks available."})]}),(0,a.jsx)(C,{className:"w-full max-w-xs",src:T,isPlaying:_&&!!T,loop:!0,volume:.5,label:T?null==(t=L.find(e=>e.filePath===T))?void 0:t.name:"No Sound"})]})]})}},17313:(e,t,r)=>{r.d(t,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>i});var a=r(95155),s=r(12115),o=r(60704),n=r(59434);let i=o.bL,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});l.displayName=o.B8.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});d.displayName=o.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=o.UC.displayName},30285:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>l});var a=r(95155),s=r(12115),o=r(99708),n=r(74466),i=r(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},33436:(e,t,r)=>{r.d(t,{U2:()=>i});var a=r(86406),s=r(43152),o=r(53838);let n={id:"lofi_chill_1",name:"Lofi Chill Beats Vol. 1",description:"Smooth lo-fi hip hop beats to keep you focused and relaxed. Perfect for long study sessions.",price:75,icon:a.A,category:"Soundtrack",filePath:"/sounds/placeholder_lofi_1.mp3",colorClass:"bg-purple-500/10 border-purple-500/30 text-purple-600 dark:text-purple-300"},i=[n,{id:"ambient_waves_1",name:"Ambient Focus Waves",description:"Calming ambient soundscapes with gentle wave sounds to minimize distractions.",price:60,icon:s.A,category:"Soundtrack",filePath:"/sounds/placeholder_ambient_1.mp3",colorClass:"bg-blue-500/10 border-blue-500/30 text-blue-600 dark:text-blue-300"},{id:"nature_study_1",name:"Forest Study Scape",description:"Immersive nature sounds, like a gentle forest breeze and birdsong, for deep concentration.",price:90,icon:o.A,category:"Soundtrack",filePath:"/sounds/placeholder_nature_1.mp3",colorClass:"bg-green-500/10 border-green-500/30 text-green-600 dark:text-green-300"}]},59409:(e,t,r)=>{r.d(t,{bq:()=>m,eb:()=>x,gC:()=>g,l6:()=>c,yv:()=>u});var a=r(95155),s=r(12115),o=r(31992),n=r(79556),i=r(77381),l=r(10518),d=r(59434);let c=o.bL;o.YJ;let u=o.WT,m=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(o.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,a.jsx)(o.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=o.l9.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=o.PP.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=o.wn.displayName;let g=s.forwardRef((e,t)=>{let{className:r,children:s,position:n="popper",...i}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...i,children:[(0,a.jsx)(f,{}),(0,a.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(p,{})]})})});g.displayName=o.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=o.JU.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(o.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(o.p4,{children:s})]})});x.displayName=o.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=o.wv.displayName}}]);