(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{2657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(95155),s=a(12115),i=a(27600),n=a(35695),o=a(62177),l=a(90221),u=a(71153),d=a(30285),c=a(66695),m=a(24944),p=a(74601),f=a(50172),g=a(87481),h=a(56104),v=a(35317),x=a(68856);let y=s.lazy(()=>Promise.all([a.e(1127),a.e(9397),a.e(9205),a.e(7328),a.e(8200),a.e(6551),a.e(3401)]).then(a.bind(a,93401))),b=s.lazy(()=>Promise.all([a.e(1127),a.e(9397),a.e(9205),a.e(7328),a.e(8200),a.e(2251)]).then(a.bind(a,62251))),j=s.lazy(()=>Promise.all([a.e(7328),a.e(6551),a.e(6288),a.e(7832)]).then(a.bind(a,67832))),N=u.z.object({targetExams:u.z.array(u.z.string()).min(1,"Please select at least one target exam."),otherExamName:u.z.string().optional(),examAttemptYear:u.z.string().min(1,"Please select your attempt year."),languageMedium:u.z.string().min(1,"Please select your language medium."),studyMode:u.z.string().optional(),examPhase:u.z.string().optional(),previousAttempts:u.z.string().optional()});N.refine(e=>{var t;return null==(t=e.targetExams)||!t.includes("other")||!!e.otherExamName&&""!==e.otherExamName.trim()},{message:"Please specify the exam name if 'Other' is selected.",path:["otherExamName"]});let S=u.z.object({dailyStudyHours:u.z.string().min(1,"Please select your daily study hours."),preferredStudyTime:u.z.array(u.z.string()).min(1,"Select at least one preferred study time."),weakSubjects:u.z.array(u.z.string()).optional(),strongSubjects:u.z.array(u.z.string()).optional(),distractionStruggles:u.z.string().max(500,"Response too long (max 500 chars).").optional()}),w=u.z.object({preferredLearningStyles:u.z.array(u.z.string()).min(1,"Select at least one learning style."),motivationType:u.z.string().min(1,"Please select your motivation type."),age:u.z.coerce.number().positive("Age must be a positive number").min(10,"Age seems too low").max(100,"Age seems too high").optional().nullable(),location:u.z.string().max(100,"Location too long (max 100 chars).").optional(),socialVisibilityPublic:u.z.boolean().optional()}),E=N.merge(S).merge(w).refine(e=>{var t;return null==(t=e.targetExams)||!t.includes("other")||!!e.otherExamName&&""!==e.otherExamName.trim()},{message:"Please specify the exam name if 'Other' is selected.",path:["otherExamName"]});function A(){return(0,r.jsxs)("div",{className:"space-y-4 md:space-y-6 py-4",children:[(0,r.jsx)(x.E,{className:"h-8 w-1/2"}),(0,r.jsx)(x.E,{className:"h-10 w-full"}),(0,r.jsx)(x.E,{className:"h-8 w-1/3 mt-4"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(x.E,{className:"h-10 w-full"}),(0,r.jsx)(x.E,{className:"h-10 w-full"})]}),(0,r.jsx)(x.E,{className:"h-20 w-full mt-4"})]})}function T(e){let{userId:t,onOnboardingSuccess:a}=e,[i,n]=(0,s.useState)(1),[u,x]=(0,s.useState)(!1),{toast:N}=(0,g.dj)(),S=(0,o.mN)({resolver:(0,l.u)(E),mode:"onBlur",defaultValues:{targetExams:[],otherExamName:"",examAttemptYear:"",languageMedium:"",studyMode:"",examPhase:"",previousAttempts:"",dailyStudyHours:"",preferredStudyTime:[],weakSubjects:[],strongSubjects:[],distractionStruggles:"",preferredLearningStyles:[],motivationType:"",age:null,location:"",socialVisibilityPublic:!1,onboardingCompleted:!1}}),{handleSubmit:w,trigger:T}=S,P=async()=>{let e=!1;1===i?e=await T(["targetExams","otherExamName","examAttemptYear","languageMedium","studyMode","examPhase","previousAttempts"]):2===i?e=await T(["dailyStudyHours","preferredStudyTime","weakSubjects","strongSubjects","distractionStruggles"]):3===i&&(e=await T(["preferredLearningStyles","motivationType","age","location","socialVisibilityPublic"])),e&&i<3?n(e=>e+1):e&&3===i&&await w(C)()},C=async e=>{var r;x(!0);let s=(0,v.H9)(h.db,"users",t,"userProfile","profile"),i={...e};(null==(r=e.targetExams)?void 0:r.includes("other"))||(i.otherExamName=""),(null===i.age||0===i.age)&&delete i.age;let n={...i,onboardingCompleted:!0};try{await (0,v.BN)(s,n,{merge:!0}),a()}catch(e){console.error("Error saving onboarding data:",e),N({title:"Error Saving Profile",description:e.message||"Could not save your preferences. Please try again.",variant:"destructive"})}finally{x(!1)}};return(0,r.jsxs)(c.Zp,{className:"w-full max-w-xl shadow-2xl my-4 sm:my-8",children:[(0,r.jsxs)(c.aR,{className:"text-center p-4 sm:p-6",children:[(0,r.jsx)(p.A,{className:"mx-auto h-8 w-8 sm:h-10 sm:w-10 text-primary mb-1 sm:mb-2"}),(0,r.jsx)(c.ZB,{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:"Personalize Your StudyTrack"}),(0,r.jsxs)(c.BT,{className:"text-sm sm:text-base",children:["Tell us a bit about yourself to tailor your learning journey. (Step ",i," of ",3,")"]})]}),(0,r.jsxs)(c.Wu,{className:"p-4 sm:p-6",children:[(0,r.jsx)(m.k,{value:i/3*100,className:"mb-6 sm:mb-8 h-2.5 sm:h-3"}),(0,r.jsx)(o.Op,{...S,children:(0,r.jsx)("form",{onSubmit:w(C),className:"space-y-5 sm:space-y-6",children:(0,r.jsxs)(s.Suspense,{fallback:(0,r.jsx)(A,{}),children:[1===i&&(0,r.jsx)(y,{}),2===i&&(0,r.jsx)(b,{}),3===i&&(0,r.jsx)(j,{})]})})})]}),(0,r.jsxs)(c.wL,{className:"flex flex-col sm:flex-row justify-between pt-5 sm:pt-6 border-t p-4 sm:p-6 gap-3 sm:gap-0",children:[(0,r.jsx)(d.$,{variant:"outline",onClick:()=>{n(e=>Math.max(1,e-1))},disabled:1===i||u,className:"w-full sm:w-auto text-sm sm:text-base",children:"Previous"}),i<3?(0,r.jsx)(d.$,{onClick:P,disabled:u,className:"w-full sm:w-auto text-sm sm:text-base",children:"Next"}):(0,r.jsx)(d.$,{onClick:w(C),disabled:u,className:"w-full sm:w-auto text-sm sm:text-base",children:u?(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Finish Setup"})]})]})}function P(){let{currentUser:e,loading:t}=(0,i.A)(),a=(0,n.useRouter)(),{toast:o}=(0,g.dj)();return((0,s.useEffect)(()=>{t||e||a.push("/login")},[e,t,a]),t)?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,r.jsx)(f.A,{className:"h-12 w-12 animate-spin text-primary"})}):e?(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-sky-100 via-indigo-50 to-purple-100 dark:from-sky-900 dark:via-indigo-950 dark:to-purple-900 p-4 sm:p-6 lg:p-8",children:(0,r.jsx)(T,{userId:e.uid,onOnboardingSuccess:()=>{o({title:"Profile Setup Complete! \uD83C\uDF89",description:"We've saved your preferences. Generating your AI recommendations..."}),setTimeout(()=>{a.push("/ai-recommendations")},1500)}})}):null}},9518:(e,t,a)=>{Promise.resolve().then(a.bind(a,2657))},24944:(e,t,a)=>{"use strict";a.d(t,{k:()=>o});var r=a(95155),s=a(12115),i=a(55863),n=a(59434);let o=s.forwardRef((e,t)=>{let{className:a,value:s,...o}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...o,children:(0,r.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});o.displayName=i.bL.displayName},27600:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>c});var r=a(95155),s=a(93004),i=a(35695),n=a(12115),o=a(56104),l=a(87481);let u=(0,n.createContext)(void 0);function d(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:t}=e,[a,d]=(0,n.useState)(null),[c,m]=(0,n.useState)(!0),[p,f]=(0,n.useState)(null),g=(0,i.useRouter)(),{toast:h}=(0,l.dj)();(0,n.useEffect)(()=>(0,s.hg)(o.j2,e=>{d(e),m(!1)},e=>{f(e.message),m(!1),h({title:"Authentication Error",description:e.message,variant:"destructive"})}),[h]);let v=(0,n.useCallback)(async(e,t,a)=>{m(!0),f(null);try{let r=await (0,s.eJ)(o.j2,e,t);await (0,s.r7)(r.user,{displayName:a}),d(r.user),h({title:"Signup Successful!",description:"Welcome to StudyTrack!"}),g.push("/dashboard")}catch(e){f(e.message),"auth/email-already-in-use"===e.code?h({title:"Signup Failed",description:"This email address is already registered. Please use a different email or try logging in.",variant:"destructive"}):h({title:"Signup Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[o.j2,g,h]),x=(0,n.useCallback)(async(e,t)=>{m(!0),f(null);try{await (0,s.x9)(o.j2,e,t),h({title:"Login Successful!",description:"Welcome back!"}),g.push("/dashboard")}catch(e){f(e.message),h({title:"Login Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[o.j2,g,h]),y=(0,n.useCallback)(async()=>{m(!0),f(null);try{await (0,s.CI)(o.j2),h({title:"Logged Out",description:"You have been successfully logged out."}),g.push("/login")}catch(e){f(e.message),h({title:"Logout Failed",description:e.message,variant:"destructive"})}finally{m(!1)}},[o.j2,g,h]),b=(0,n.useMemo)(()=>({currentUser:a,loading:c,error:p,signUp:v,signIn:x,logOut:y}),[a,c,p,v,x,y]);return(0,r.jsx)(u.Provider,{value:b,children:t})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>u,r:()=>l});var r=a(95155),s=a(12115),i=a(99708),n=a(74466),o=a(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:u=!1,...d}=e,c=u?i.DX:"button";return(0,r.jsx)(c,{className:(0,o.cn)(l({variant:s,size:n,className:a})),ref:t,...d})});u.displayName="Button"},46081:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,q:()=>i});var r=a(12115),s=a(95155);function i(e,t){let a=r.createContext(t),i=e=>{let{children:t,...i}=e,n=r.useMemo(()=>i,Object.values(i));return(0,s.jsx)(a.Provider,{value:n,children:t})};return i.displayName=e+"Provider",[i,function(s){let i=r.useContext(a);if(i)return i;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function n(e,t=[]){let a=[],i=()=>{let t=a.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return i.scopeName=e,[function(t,i){let n=r.createContext(i),o=a.length;a=[...a,i];let l=t=>{let{scope:a,children:i,...l}=t,u=a?.[e]?.[o]||n,d=r.useMemo(()=>l,Object.values(l));return(0,s.jsx)(u.Provider,{value:d,children:i})};return l.displayName=t+"Provider",[l,function(a,s){let l=s?.[e]?.[o]||n,u=r.useContext(l);if(u)return u;if(void 0!==i)return i;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(i,...t)]}},50172:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},55863:(e,t,a)=>{"use strict";a.d(t,{C1:()=>j,bL:()=>b});var r=a(12115),s=a(46081),i=a(63655),n=a(95155),o="Progress",[l,u]=(0,s.A)(o),[d,c]=l(o),m=r.forwardRef((e,t)=>{var a,r,s,o;let{__scopeProgress:l,value:u=null,max:c,getValueLabel:m=g,...p}=e;(c||0===c)&&!x(c)&&console.error((a="".concat(c),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let f=x(c)?c:100;null===u||y(u,f)||console.error((s="".concat(u),o="Progress","Invalid prop `value` of value `".concat(s,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let b=y(u,f)?u:null,j=v(b)?m(b,f):void 0;return(0,n.jsx)(d,{scope:l,value:b,max:f,children:(0,n.jsx)(i.sG.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":v(b)?b:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(b,f),"data-value":null!=b?b:void 0,"data-max":f,...p,ref:t})})});m.displayName=o;var p="ProgressIndicator",f=r.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...s}=e,o=c(p,r);return(0,n.jsx)(i.sG.div,{"data-state":h(o.value,o.max),"data-value":null!=(a=o.value)?a:void 0,"data-max":o.max,...s,ref:t})});function g(e,t){return"".concat(Math.round(e/t*100),"%")}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function x(e){return v(e)&&!isNaN(e)&&e>0}function y(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}f.displayName=p;var b=m,j=f},56104:(e,t,a)=>{"use strict";let r;a.d(t,{db:()=>d,j2:()=>u});var s=a(23915),i=a(93004),n=a(35317),o=a(86864);let l={apiKey:"AIzaSyAuHcdS5piYz3vMmCji71C-TgrYvZeC7Mw",authDomain:"studyplanner-4abf5.firebaseapp.com",projectId:"studyplanner-4abf5",storageBucket:"studyplanner-4abf5.firebasestorage.app",messagingSenderId:"193887379026",appId:"1:193887379026:web:34b7b5e1bde23d79c5898b",measurementId:"G-PZWY3Y7QBE"};l.apiKey&&l.projectId||console.error("CRITICAL FIREBASE CONFIGURATION ERROR: Firebase apiKey or projectId is missing or undefined.","This usually means your environment variables are not loaded correctly.","Please verify the following:","1. Your .env file is at the ROOT of your project.",'2. All Firebase related environment variables in .env START WITH "NEXT_PUBLIC_". (e.g., NEXT_PUBLIC_FIREBASE_API_KEY).',"3. You have RESTARTED your Next.js development server after making changes to the .env file.","4. The values in your .env file are correct and do not contain typos.","Current apiKey used for initialization: ".concat(l.apiKey),"Current projectId used for initialization: ".concat(l.projectId)),r=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(l);let u=(0,i.xI)(r),d=(0,n.aU)(r);if(l.measurementId)try{(0,o.P5)(r)}catch(e){console.error("Firebase Analytics initialization error:",e)}(0,i.oM)(u,i.F0).catch(e=>{console.error("Firebase: Error setting auth persistence:",e.code,e.message)})},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(52596),s=a(39688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>u,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>c});var r=a(95155),s=a(12115),i=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});u.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});c.displayName="CardFooter"},68856:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(95155),s=a(59434);function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...a})}},74601:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(12115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],u={toasts:[]};function d(e){u=o(u,e),l.forEach(e=>{e(u)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(u);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,4277,460,3418,861,8441,1684,7358],()=>t(9518)),_N_E=e.O()}]);